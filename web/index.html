<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>WebRTC Demo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
</head>
<body class="m-0 font-sans bg-black text-white overflow-hidden">

<!-- Header -->
<header class="fixed top-0 left-0 w-full bg-black/60 z-40 p-3 sm:p-4">
    <h1 class="text-lg sm:text-xl font-bold">WebRTC Test</h1>
</header>

<!-- Controls -->
<div id="controls"
     class="fixed top-14 sm:top-16 left-2 right-2 sm:left-4 sm:right-auto bg-black/70 p-3 sm:p-4 rounded-lg z-40 space-y-3 sm:w-[320px] max-w-full">
    <div class="text-yellow-400 text-sm sm:text-base">
        <span id="myId" class="font-bold">Your ID: ...</span>
        <button onclick="copyMyId()"
                class="ml-2 px-2 py-1 text-xs sm:text-sm bg-gray-200 text-black rounded hover:bg-gray-300">
            Copy
        </button>
        <p class="mt-2 text-xs sm:text-sm text-white leading-snug">
            Share this ID with someone you want to connect with.<br/>
            They will enter it below to call you.
        </p>
    </div>

    <div>
        <label class="block text-xs sm:text-sm mb-1">Peer ID to call:</label>
        <input id="peerId"
               placeholder="Enter peer ID"
               class="w-full px-2 py-1 rounded bg-white text-black placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500" />
    </div>

    <div class="flex flex-wrap gap-2">
        <button onclick="startCall()" class="flex-1 px-3 py-1 rounded bg-blue-600 hover:bg-blue-500 text-sm sm:text-base">
            Call
        </button>
    </div>
</div>

<!-- Videos -->
<div>
    <video id="remote"
           autoplay playsinline
           class="fixed inset-0 w-screen h-screen object-cover bg-black z-0"></video>
    <video id="local"
           autoplay playsinline muted
           class="fixed bottom-2 right-2 sm:bottom-4 sm:right-4 w-32 h-24 sm:w-48 sm:h-36 border-2 border-white rounded-lg bg-black z-30"></video>
</div>

<!-- Log -->
<div id="log"
     class="fixed bottom-2 left-2 sm:bottom-4 sm:left-4 w-[calc(100%-1rem)] sm:w-80 max-h-40 sm:max-h-52 overflow-y-auto border border-gray-700 p-2 bg-black/70 text-xs text-gray-100 rounded z-40">
</div>

<!-- Incoming Call Popup -->
<div id="incomingCallModal"
     class="hidden fixed inset-0 flex items-center justify-center bg-black/70 z-50 p-4 transition-opacity duration-300">
    <div id="incomingCallBox"
         class="bg-gray-900 text-white p-4 sm:p-6 rounded-lg shadow-lg w-full max-w-sm transform transition-all duration-300 scale-95 opacity-0">
        <h2 class="text-base sm:text-lg font-bold mb-3 sm:mb-4">Incoming Call</h2>
        <p class="mb-4 sm:mb-6 text-sm sm:text-base">
            <span id="callerId" class="font-semibold text-yellow-400">Unknown</span>
            is calling you.
        </p>
        <div class="flex flex-col sm:flex-row justify-end gap-2 sm:gap-3">
            <button id="rejectBtn"
                    class="w-full sm:w-auto px-3 py-2 bg-red-600 hover:bg-red-500 rounded text-sm sm:text-base">
                Reject
            </button>
            <button id="acceptBtn"
                    class="w-full sm:w-auto px-3 py-2 bg-green-600 hover:bg-green-500 rounded text-sm sm:text-base">
                Answer
            </button>
        </div>
    </div>
</div>

<!-- Calling Popup -->
<div id="callingModal"
     class="hidden fixed inset-0 flex items-center justify-center bg-black/70 z-50 p-4 transition-opacity duration-300">
    <div id="callingBox"
         class="bg-gray-900 text-white p-4 sm:p-6 rounded-lg shadow-lg w-full max-w-sm transform transition-all duration-300 scale-95 opacity-0 text-center">
        <h2 class="text-base sm:text-lg font-bold mb-3 sm:mb-4">Callingâ€¦</h2>
        <p class="mb-4 sm:mb-6 text-sm sm:text-base">
            Dialing <span id="calleeId" class="font-semibold text-yellow-400">Unknown</span>
        </p>
        <div class="flex justify-center">
            <button id="cancelCallBtn"
                    class="px-4 py-2 bg-red-600 hover:bg-red-500 rounded">
                Cancel
            </button>
        </div>
    </div>
</div>

<script src="app.js"></script>
</body>
</html>
